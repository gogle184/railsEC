.container
  .row.mb-3
    .col-10
      = link_to t('common.view.action.back'), root_path, class: 'btn btn-primary'
      %h1.mb-3= t('cart.show.title')
      - if @cart_items.present?
        - @cart_items.each do |cart_item|
          .d-flex.mb-3.border-bottom
            .col-md-2
              = product_image_tag(cart_item.product, :small)
            .col-md-7.ms-5
              %h5= cart_item.product.name
              %p= number_to_currency(cart_item.product.add_tax_price)
              = simple_form_for cart_item, url: cart_cart_item_path(cart_item), method: :patch, html: { novalidate: true } do |f|
                .col-sm-4.mb-3
                  = f.input :quantity, as: :integer, input_html: { value: cart_item.quantity }, class: 'form-control'
                  = f.submit t('cart.show.quantity_update'), class: 'btn btn-outline-secondary'
              = button_to t('cart.show.destroy'), cart_cart_item_path(cart_item), method: :delete,
                                                                                  data: { turbo_confirm: t('common.view.action.confirm_delete') },
                                                                                  class: 'btn btn-danger mb-3'
        %p.mt-3 #{t('common.view.sub.total_quantity')} #{current_cart.total_quantity}
        %p.mt-3 #{t('common.view.sub.tax_included_total_price')} #{number_to_currency(current_cart.tax_included_total_price)}
        %p.mt-3 #{t('common.view.sub.cash_on_delivery')} #{number_to_currency(current_cart.cash_on_delivery)}
        %p.mt-3 #{t('common.view.sub.shipping_fee')} #{number_to_currency(current_cart.shipping_fee)}
        %p.mt-3 #{t('common.view.sub.total_price')} #{number_to_currency(current_cart.final_total_price)}
        - if user_signed_in?
          = link_to t('cart.show.confirm'), confirm_order_path, class: 'btn btn-primary'
        - else
          = link_to t('cart.show.need_to_login'), new_user_session_path, class: 'btn btn-primary'
      - else
        %p= t('cart.show.empty')
